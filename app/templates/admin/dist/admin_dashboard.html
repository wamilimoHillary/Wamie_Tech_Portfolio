<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/admin_dashboard.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/admin_forms.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/colors.css') }}">

    
</head>
<body>
    <header class="header">
        <button id="toggle-sidebar" class="menu-btn"><i class="fas fa-bars"></i></button>
        <a href="{{ url_for('auth.admin_logout') }}" id="logout-btn" class="logout-btn"><i class="fas fa-sign-out-alt"></i> LogOut</a>
    </header>

    <aside id="sidebar" class="sidebar">
        <nav>
            <a href="#" class="nav-link" data-modal="manage-users-modal"><i class="fas fa-users-cog"></i> Manage users</a>
            <a href="#" class="nav-link" data-modal="manage-projects-modal"><i class="fas fa-tasks"></i> Manage Projects</a>
            <a href="#" class="nav-link" data-modal="manage-services-modal"><i class="fas fa-cogs"></i> Manage Services</a>
            <a href="#" class="nav-link" data-modal="manage-team-modal"><i class="fas fa-users-cog"></i> Manage Team</a>
            <a href="{{url_for('admin.manage_testimonials')}}"><i class="fas fa-users-cog"></i> Manage-testimonials</a>
            <a href="#" class="nav-link" data-modal="manage-analytics-modal"><i class="fas fa-chart-line"></i> Analytics</a>
            <a href="#" class="nav-link" data-modal="manage-notifications-modal"><i class="fas fa-comments"></i> Notifications</a>
            <button id="logout-btn" class="logout-btn"><i class="fas fa-sign-out-alt"></i> Logout</button>
        
        </nav>
    </aside>

    <main class="main-content">
        
           <!-- Display Flash Messages -->
    {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
        <div class="flash-messages">
            {% for category, message in messages %}
                <div class="flash {{ category }}">{{ message }}</div>
            {% endfor %}
        </div>
    {% endif %}
    {% endwith %}  
       <h1>Welcome, Admin! to Key Metrics</h1> <br>
        <section class="dashboard-cards">
            <!--card 1-->
                <div class="card">
                    <i class="fas fa-users"></i>
                    <h3>Total Users</h3>
                    <!--dynamically show all users in numbers-->
                    <p>{{ user_count }}</p>
                    <a href="{{ url_for('admin.manage_users') }}"><i class="fas fa-users-cog"></i> Manage</a>
                  </div>
                <!--card 2-->
                <div class="card">
                    <i class="fas fa-clipboard-list"></i>
                    <h3>Projects</h3>
                    <p>{{ project_count }}</p>

                    <a href="{{url_for('admin.manage_projects')}}"><i class="fas fa-tasks"></i> Manage</a>
                </div>
                <!--card 3-->
                <div class="card">
                    <i class="fas fa-users"></i>
                    <h3>Teams</h3>
                    <p>{{team_count}}</p>
                    
                    <a href="{{url_for('admin.manage_teams')}}"><i class="fas fa-users-cog"></i> Manage</a>
                </div>
                <!--card 4-->
                <div class="card">
                    <i class="fas fa-cogs"></i>
                    <h3>Services</h3>
                    <p>{{services_count}}</p>

                    <a href="{{url_for('admin.manage_services')}}"><i class="fas fa-cogs"></i> Manage</a>
                </div>
        </section>

        <section class="analytics">
            <h2>Analytics Overview</h2>
            <div class="analytics-content">
                <p>Placeholder for analytics charts and graphs. You can integrate tools like Chart.js here.</p>
            </div>
        </section>

        <section>
        
            {% block content %}
            <!-- Dynamic content will go here -->
            {% endblock %}
        
        </section>
    </main>

    <!-- sidebar Modals -->
    <div id="manage-users-modal" class="modal">
        <div class="modal-content">
          <span class="close-btn">&times;</span>
          <h2>User Management</h2>
         
        
          <!--table to display users-->
          <table class="user-table">
            <thead>
              <thead>
                <tr>
                    <th>ID</th>
                    <th>Username</th>
                    <th>Email</th>
                    <th>Phone</th>
                    <th>Status</th>
                    <th>created at</th>
                    <th>Actions</th>
                </tr>
            </thead>
            
            <tbody>
              {% for user in users %}
                <tr>
                  <td>{{ user[0] }}</td> <!-- assuming user[0] is the ID -->
                  <td>{{ user[1] }}</td> <!-- assuming user[1] is the username -->
                  <td>{{ user[2] }}</td> <!-- assuming user[2] is the email -->
                  <td>{{ user[3] }}</td> <!-- assuming user[3] is the phone -->
                  <td>{{ user[5] }}</td> <!-- assuming user[5] is the status -->
                  <td>{{ user[7] }}</td> <!-- assuming user[7] is created_at -->
                  <td>
                      <button class="edit-btn" data-id="{{ user[0] }}" data-username="{{ user[1] }}" data-email="{{ user[2] }}" 
                          data-phone="{{ user[3] }}" data-status="{{ user[5] }}"><i class="fas fa-edit"></i>Edit</button>

                      <button class="delete-btn"><i class="fas fa-trash"></i> Delete</button>
                  </td>
                </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      </div>
      
    <div id="manage-projects-modal" class="modal">
        <div class="modal-content">
            <span class="close-btn">&times;</span>
            <h2>manage-projects</h2>
            <button class="add-btn"><i class="fas fa-plus"></i> Add Project</button>

            <div class="user-actions">
              <input type="text" id="search-bar" placeholder="Search project by name or date...">
            </div>
            <table class="user-table">
              <thead>
                <tr>
                  <th>ID</th>
                  <th>Name</th>
                  <th>desription</th>
                  <th>status</th>
                  <th>datecreated</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody>
                {% for user in users %}
                  <tr>
                    <td>{{ [] }}</td> <!-- assuming user[0] is the ID -->
                    <td>{{ [] }}</td> <!-- assuming user[1] is the username -->
                    <td>{{ [] }}</td> <!-- assuming user[2] is the email -->
                    <td>{{ [] }}</td> <!-- assuming user[3] is the phone -->
                    <td>{{ [] }}</td> <!-- assuming user[5] is the status -->
                    
                    <td>
                        <button class="edit-btn" id="edit-btn"><i class="fas fa-edit"></i> Edit</button>
                        <button class="delete-btn"><i class="fas fa-trash"></i> Delete</button>
                    </td>
                  </tr>
                {% endfor %}
              </tbody>
            </table>
        </div>
    </div>

    <div id="manage-services-modal" class="modal">
        <div class="modal-content">
            <span class="close-btn">&times;</span>
            <h2><i class="fas fa-cogs"></i> Manage Services</h2>
            
            <button class="add-btn"><i class="fas fa-plus"></i> Add Services</button>

            <div class="user-actions">
              <input type="text" id="search-bar" placeholder="Search project by name or date...">
            </div>
            <table class="user-table">
              <thead>
                <tr>
                  <th>ID</th>
                  <th>Name</th>
                  <th>Email</th>
                  <th>Role</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>1</td>
                  <td>Moses Otieno</td>
                  <td>moses22otieno@gmail.com</td>
                  <td>User</td>
                  <td>
                    <button class="edit-btn"><i class="fas fa-edit"></i> Edit</button>
                    <button class="delete-btn"><i class="fas fa-trash"></i> Delete</button>
                  </td>
                </tr>
                <tr>
                  <td>2</td>
                  <td>Wami Wami</td>
                  <td>wamietech@gmail.com</td>
                  <td>Admin</td>
                  <td>
                    <button class="edit-btn"><i class="fas fa-edit"></i> Edit</button>
                    <button class="delete-btn"><i class="fas fa-trash"></i> Delete</button>
                  </td>
                </tr>
              </tbody>
            </table>
        </div>
    </div>

    <div id="manage-team-modal" class="modal">
        <div class="modal-content">
            <span class="close-btn">&times;</span>
            <h2><i class="fas fa-users-cog"></i> Manage Team</h2>
            
            <button class="add-btn"><i class="fas fa-plus"></i> Add Team memeber</button>

            <div class="user-actions">
              <input type="text" id="search-bar" placeholder="Search project by name or date...">
            </div>
            <table class="user-table">
              <thead>
                <tr>
                  <th>ID</th>
                  <th>Name</th>
                  <th>Email</th>
                  <th>Role</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>1</td>
                  <td>Moses Otieno</td>
                  <td>moses22otieno@gmail.com</td>
                  <td>User</td>
                  <td>
                    <button class="edit-btn"><i class="fas fa-edit"></i> Edit</button>
                    <button class="delete-btn"><i class="fas fa-trash"></i> Delete</button>
                  </td>
                </tr>
                <tr>
                  <td>2</td>
                  <td>Wami Wami</td>
                  <td>wamietech@gmail.com</td>
                  <td>Admin</td>
                  <td>
                    <button class="edit-btn"><i class="fas fa-edit"></i> Edit</button>
                    <button class="delete-btn"><i class="fas fa-trash"></i> Delete</button>
                  </td>
                </tr>
              </tbody>
            </table>
        </div>
    </div>

    <div id="manage-testimonials-modal" class="modal">
        <div class="modal-content">
            <span class="close-btn">&times;</span>
            <h2><i class="fas fa-comment-dots"></i> Manage Testimonials</h2>

            <button class="add-btn"><i class="fas fa-plus"></i> Add Testimonials</button>

            <div class="user-actions">
              <input type="text" id="search-bar" placeholder="Search project by name or date...">
            </div>
            <table class="user-table">
              <thead>
                <tr>
                  <th>ID</th>
                  <th>Name</th>
                  <th>Email</th>
                  <th>Role</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>1</td>
                  <td>Moses Otieno</td>
                  <td>moses22otieno@gmail.com</td>
                  <td>User</td>
                  <td>
                    <button class="edit-btn"><i class="fas fa-edit"></i> Edit</button>
                    <button class="delete-btn"><i class="fas fa-trash"></i> Delete</button>
                  </td>
                </tr>
                <tr>
                  <td>2</td>
                  <td>Wami Wami</td>
                  <td>wamietech@gmail.com</td>
                  <td>Admin</td>
                  <td>
                    <button class="edit-btn"><i class="fas fa-edit"></i> Edit</button>
          
                    <button class="delete-btn"><i class="fas fa-trash"></i> Delete</button>
                  </td>
                </tr>
              </tbody>
            </table>
        </div>
    </div>

      


      
    
    <script src="{{ url_for('static', filename='admin_dashboard.js') }}"></script>
</body>
</html>
