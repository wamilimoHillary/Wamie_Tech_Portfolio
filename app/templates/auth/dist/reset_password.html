{% extends "main/base.html" %}

{% block title %}Set New Password - WamieCrafts{% endblock %}

{% block content %}

{% block styles %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/forms.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/colors.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/flash_errors.css') }}">
{% endblock %}

<main class="student_main"> <!-- Consistent wrapper for all auth forms -->
    <div class="form-container"> <!-- Shared styled container -->

        <!-- Flash Messages -->
        {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            <div class="flash-messages">
                {% for category, message in messages %}
                    <div class="flash {{ category }}">{{ message }}</div>
                {% endfor %}
            </div>
        {% endif %}
        {% endwith %}

        <h2>Set New Password</h2>
        
        <!-- Set New Password Form -->
        <form method="post" action="{{ url_for('auth.reset_password', token=token) }}">
            <div class="input-group">
                <input type="password" name="password" id="password" placeholder=" " required>
                <label for="password"><i class="fa fa-lock"></i> *New Password</label>
            </div>

            <div class="input-group">
                <input type="password" name="confirm_password" id="confirm_password" placeholder=" " required>
                <label for="confirm_password"><i class="fa fa-lock"></i> *Confirm Password</label>
            </div>

            <button type="submit" class="form-button">
                Reset Password <i class="fa fa-paper-plane"></i>
            </button>
        </form>

        <p>
            Back to 
            <a href="{{ url_for('auth.login') }}">
                <i class="fa fa-arrow-left"></i> Login
            </a>
        </p>
    </div>
</main>

{% endblock %}
